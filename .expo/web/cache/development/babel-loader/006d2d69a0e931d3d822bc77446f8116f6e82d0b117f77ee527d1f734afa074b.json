{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport React, { Component } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { db, auth } from \"../../firebase/config\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Post = function (_Component) {\n  _inherits(Post, _Component);\n  var _super = _createSuper(Post);\n  function Post(props) {\n    var _this;\n    _classCallCheck(this, Post);\n    _this = _super.call(this, props);\n    _this.state = {\n      like: false,\n      cantidadDeLikes: _this.props.dataPost.datos.likes.length\n    };\n    return _this;\n  }\n  _createClass(Post, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.dataPost.datos.likes.includes(auth.currentUser.email)) {\n        this.setState({\n          like: true\n        });\n      }\n    }\n  }, {\n    key: \"likear\",\n    value: function likear() {\n      var _this2 = this;\n      db.collection('posts').doc(this.props.dataPost.id).update({\n        likes: firebase.firestore.FieldValue.arrayUnion(auth.currentUser.email)\n      }).then(function (res) {\n        return _this2.setState({\n          like: true,\n          cantidadDeLikes: _this2.props.dataPost.datos.likes.length\n        });\n      }).catch(function (e) {\n        return console.log(e);\n      });\n    }\n  }, {\n    key: \"unlike\",\n    value: function unlike() {\n      var _this3 = this;\n      db.collection('posts').doc(this.props.dataPost.id).update({\n        likes: firebase.firestore.FieldValue.arrayRemove(auth.currentUser.email)\n      }).then(function (res) {\n        return _this3.setState({\n          like: false,\n          cantidadDeLikes: _this3.props.dataPost.datos.likes.length\n        });\n      }).catch(function (e) {\n        return console.log(e);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n      console.log(this.props);\n      return _jsxs(View, {\n        children: [_jsx(Text, {\n          children: this.props.dataPost.datos.owner\n        }), _jsx(Text, {\n          children: this.props.dataPost.datos.textoPost\n        }), _jsxs(Text, {\n          children: [\"Cantidad de Likes:\", this.state.cantidadDeLikes]\n        }), this.state.like ? _jsx(TouchableOpacity, {\n          style: styles.button,\n          onPress: function onPress() {\n            return _this4.unlike();\n          },\n          children: _jsx(Text, {\n            style: styles.textButton,\n            children: \"unLike\"\n          })\n        }) : _jsx(TouchableOpacity, {\n          style: styles.button,\n          onPress: function onPress() {\n            return _this4.likear();\n          },\n          children: _jsx(Text, {\n            style: styles.textButton,\n            children: \"Likear\"\n          })\n        })]\n      });\n    }\n  }]);\n  return Post;\n}(Component);\nvar styles = StyleSheet.create({\n  formContainer: {\n    paddingHorizontal: 10,\n    marginTop: 20\n  },\n  input: {\n    height: 20,\n    paddingVertical: 15,\n    paddingHorizontal: 10,\n    borderWidth: 1,\n    borderColor: '#ccc',\n    borderStyle: 'solid',\n    borderRadius: 6,\n    marginVertical: 10\n  },\n  button: {\n    backgroundColor: 'orange',\n    paddingHorizontal: 10,\n    paddingVertical: 6,\n    textAlign: 'center',\n    borderRadius: 4,\n    borderWidth: 1,\n    borderStyle: 'solid',\n    borderColor: 'orange'\n  },\n  textButton: {\n    color: '#fff'\n  }\n});\nexport default Post;","map":{"version":3,"names":["React","Component","Text","View","StyleSheet","TouchableOpacity","db","auth","jsx","_jsx","jsxs","_jsxs","Post","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","state","like","cantidadDeLikes","dataPost","datos","likes","length","_createClass","key","value","componentDidMount","includes","currentUser","email","setState","likear","_this2","collection","doc","id","update","firebase","firestore","FieldValue","arrayUnion","then","res","catch","e","console","log","unlike","_this3","arrayRemove","render","_this4","children","owner","textoPost","style","styles","button","onPress","textButton","create","formContainer","paddingHorizontal","marginTop","input","height","paddingVertical","borderWidth","borderColor","borderStyle","borderRadius","marginVertical","backgroundColor","textAlign","color"],"sources":["/Users/delfinarawson/Prog3Final/src/components/Post/Post.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Text, View, StyleSheet, TouchableOpacity} from 'react-native';\nimport { db, auth } from '../../firebase/config';\n\n\nclass Post extends Component {\n\n    constructor(props){\n        super(props);\n\n        this.state = {\n            like: false,\n            cantidadDeLikes: this.props.dataPost.datos.likes.length\n        }\n    }\n\n    componentDidMount(){\n        //Chequear apenas carga si el post estÃ¡ o no likeado\n        if(this.props.dataPost.datos.likes.includes(auth.currentUser.email)){\n            this.setState({\n                like:true\n            })\n        }\n        \n    }\n\n    //Necesitamos en FB que cada Post tenga una propiedad con un array de emails\n\n    likear(){\n        //Agrega un email en la propiedad like del post.\n        db.collection('posts').doc(this.props.dataPost.id).update({\n            likes:firebase.firestore.FieldValue.arrayUnion(auth.currentUser.email)\n        })\n        .then( res => this.setState({\n            like: true,\n            cantidadDeLikes: this.props.dataPost.datos.likes.length\n        })\n\n        )\n        .catch( e => console.log(e))\n    }\n\n    unlike(){\n        //Quita un email en la propiedad like del post.\n        db.collection('posts').doc(this.props.dataPost.id).update({\n            likes:firebase.firestore.FieldValue.arrayRemove(auth.currentUser.email)\n        })\n        .then( res => this.setState({\n            like: false,\n            cantidadDeLikes: this.props.dataPost.datos.likes.length\n        })\n\n        )\n        .catch( e => console.log(e))\n    }\n\n\n    render(){\n        console.log(this.props)\n        return (\n            <View>\n                <Text>{ this.props.dataPost.datos.owner }</Text>\n                <Text>{ this.props.dataPost.datos.textoPost }</Text>\n                <Text>Cantidad de Likes:{ this.state.cantidadDeLikes }</Text>\n                {\n                    this.state.like ?\n                        <TouchableOpacity style={styles.button} onPress={()=>this.unlike()}>\n                            <Text style={styles.textButton}>unLike</Text>    \n                        </TouchableOpacity>\n\n                        :\n\n                        <TouchableOpacity style={styles.button} onPress={()=> this.likear()} >\n                            <Text style={styles.textButton}>Likear</Text>    \n                        </TouchableOpacity>\n                }\n                \n\n                \n\n\n\n            </View>\n\n        )\n    }\n\n}\n\nconst styles = StyleSheet.create({\n    formContainer:{\n        paddingHorizontal:10,\n        marginTop: 20,\n    },\n    input:{\n        height:20,\n        paddingVertical:15,\n        paddingHorizontal: 10,\n        borderWidth:1,\n        borderColor: '#ccc',\n        borderStyle: 'solid',\n        borderRadius: 6,\n        marginVertical:10,\n    },\n    button:{\n        backgroundColor:'orange',\n        paddingHorizontal: 10,\n        paddingVertical: 6,\n        textAlign: 'center',\n        borderRadius:4, \n        borderWidth:1,\n        borderStyle: 'solid',\n        borderColor: 'orange'\n    },\n    textButton:{\n        color: '#fff'\n    }\n})\n\nexport default Post;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}